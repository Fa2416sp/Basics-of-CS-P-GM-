/*Пока что здесь пусто */
#include <stdio.h> // Подключает стандартную библиотеку ввода/вывода
#include <stdlib.h> // Подключает стандартную библиотеку общего назначения

void calculate_primes(int primes[], int n) { // Определяет функцию для вычисления простых чисел
    for (int i = 0; i <= n; i++) primes[i] = 1; // Инициализирует массив, помечая все элементы как 1 (предположительно простые)
    primes[0] = primes[1] = 0; // Устанавливает 0 и 1 как не простые числа
    for (int i = 2; i * i <= n; i++) { // Проходит по числам до квадратного корня n
        if (primes[i]) { // Если число простое
            for (int j = i * i; j <= n; j += i) primes[j] = 0; // Помечает все кратные числа как не простые
        }
    }
}

void goldbach(int n, int primes[]) { // Определяет функцию для проверки гипотезы Гольдбаха
    int count = 0, p1 = 0, p2 = 0; // Инициализирует счётчик и пару простых чисел
    for (int i = 2; i <= n / 2; i++) { // Проходит по числам от 2 до половины n
        if (primes[i] && primes[n - i]) { // Проверяет, если обе части разбиения простые
            if (count == 0 || i < p1) { // Проверяет, если это первая найденная пара или если текущее число меньше первого найденного
                p1 = i; // Сохраняет текущее число как первую часть пары
                p2 = n - i; // Сохраняет оставшуюся часть как вторую часть пары
            }
            count++; // Увеличивает счётчик найденных пар
        }
    }
    printf("%d %d %d %d\n", n, count, p1, p2); // Выводит n, количество пар, и самую первую найденную пару
}

int main() { // Начало основной программы
    int n; // Объявляет переменную для хранения значения n
    printf("Введите значение n: "); // Просит пользователя ввести значение n
    scanf("%d", &n); // Считывает значение n с ввода пользователя
    if (n > 10000000) { // Проверяет, чтобы n не превышало 10 000 000
        printf("n не должно превышать 10 000 000\n"); // Выводит сообщение об ошибке
        return 1; // Завершает программу с кодом ошибки
    }
    int *primes = (int *)malloc((n + 1) * sizeof(int)); // Выделяет память для массива простых чисел
    if (!primes) { // Проверяет успешность выделения памяти
        printf("Ошибка выделения памяти\n"); // Выводит сообщение об ошибке
        return 1; // Завершает программу с кодом ошибки
    }
    calculate_primes(primes, n); // Вызывает функцию для вычисления простых чисел до n
    printf("Простые числа до %d:\n", n); // Выводит сообщение о простых числах
    for (int i = 2; i <= n; i++) if (primes[i]) printf("%d ", i); // Выводит все простые числа до n
    printf("\n"); // Переходит на новую строку
    int a, b; // Объявляет переменные для хранения значений a и b
    printf("Введите два числа a и b: "); // Просит пользователя ввести значения a и b
    scanf("%d %d", &a, &b); // Считывает значения a и b с ввода пользователя
    if (a % 2 != 0 || b % 2 != 0 || a < 4 || b > 10000000) { // Проверяет корректность входных данных
        printf("Неверные входные данные\n"); // Выводит сообщение об ошибке
        free(primes); // Освобождает память
        return 1; // Завершает программу с кодом ошибки
    }
    for (int i = a; i <= b; i += 2) goldbach(i, primes); // Применяет гипотезу Гольдбаха для всех четных чисел в диапазоне [a, b]
    free(primes); // Освобождает память
    return 0; // Завершает программу с успешным кодом
}
